name: Weekly Jobs - 2025-W50

on:
  schedule:
    - cron: '*/2 12-14 20 12 *'
    - cron: '*/2 15-17 20 12 *'
    - cron: '*/2 16-18 21 12 *'
    - cron: '*/2 17-19 20 12 *'
    - cron: '*/2 20-22 15 12 *'
    - cron: '*/2 20-22 20 12 *'
    - cron: '0 11 1 5 *'
    - cron: '0 11 10 2 *'
    - cron: '0 11 10 4 *'
    - cron: '0 11 13 3 *'
    - cron: '0 11 16 5 *'
    - cron: '0 11 17 4 *'
    - cron: '0 11 20 2 *'
    - cron: '0 11 20 3 *'
    - cron: '0 11 23 5 *'
    - cron: '0 11 24 4 *'
    - cron: '0 11 27 2 *'
    - cron: '0 11 3 3 *'
    - cron: '0 11 31 1 *'
    - cron: '0 11 6 2 *'
    - cron: '0 11 8 5 *'
    - cron: '0 14 30 1 *'
    - cron: '0 14 31 1 *'
    - cron: '0 16 26 12 *'
    - cron: '0 16 6 1 *'
    - cron: '0 19 25 12 *'
    - cron: '0 19 26 12 *'
    - cron: '0 19 5 1 *'
    - cron: '0 19 6 1 *'
    - cron: '0 2 31 1 *'
    - cron: '0 20 1 5 *'
    - cron: '0 20 10 2 *'
    - cron: '0 20 10 4 *'
    - cron: '0 20 13 3 *'
    - cron: '0 20 16 5 *'
    - cron: '0 20 17 4 *'
    - cron: '0 20 20 2 *'
    - cron: '0 20 20 3 *'
    - cron: '0 20 23 5 *'
    - cron: '0 20 24 4 *'
    - cron: '0 20 27 2 *'
    - cron: '0 20 3 3 *'
    - cron: '0 20 6 2 *'
    - cron: '0 20 8 5 *'
    - cron: '0 23 1 5 *'
    - cron: '0 23 10 2 *'
    - cron: '0 23 10 4 *'
    - cron: '0 23 12 3 *'
    - cron: '0 23 13 3 *'
    - cron: '0 23 15 5 *'
    - cron: '0 23 16 4 *'
    - cron: '0 23 16 5 *'
    - cron: '0 23 17 4 *'
    - cron: '0 23 19 2 *'
    - cron: '0 23 19 3 *'
    - cron: '0 23 2 3 *'
    - cron: '0 23 20 2 *'
    - cron: '0 23 20 3 *'
    - cron: '0 23 22 5 *'
    - cron: '0 23 23 4 *'
    - cron: '0 23 23 5 *'
    - cron: '0 23 24 4 *'
    - cron: '0 23 26 2 *'
    - cron: '0 23 27 2 *'
    - cron: '0 23 3 3 *'
    - cron: '0 23 30 4 *'
    - cron: '0 23 5 2 *'
    - cron: '0 23 6 2 *'
    - cron: '0 23 7 5 *'
    - cron: '0 23 8 5 *'
    - cron: '0 23 9 2 *'
    - cron: '0 23 9 4 *'
    - cron: '0 7 26 12 *'
    - cron: '0 7 6 1 *'
    - cron: '30 11 16 1 *'
    - cron: '30 11 17 1 *'
    - cron: '30 11 19 12 *'
    - cron: '30 11 2 1 *'
    - cron: '30 11 20 12 *'
    - cron: '30 11 23 1 *'
    - cron: '30 11 24 1 *'
    - cron: '30 11 3 1 *'
    - cron: '30 15 30 12 *'
    - cron: '30 18 29 12 *'
    - cron: '30 18 30 12 *'
    - cron: '30 23 16 1 *'
    - cron: '30 23 19 12 *'
    - cron: '30 23 2 1 *'
    - cron: '30 23 23 1 *'
    - cron: '30 6 30 12 *'
    - cron: '30 8 17 1 *'
    - cron: '30 8 20 12 *'
    - cron: '30 8 24 1 *'
    - cron: '30 8 3 1 *'
  workflow_dispatch:

jobs:
  send-reminders:
    name: Send Pick Reminders
    runs-on: ubuntu-latest
    if: github.event.schedule == '30 11 19 12 *' || github.event.schedule == '30 23 19 12 *' || github.event.schedule == '30 8 20 12 *' || github.event.schedule == '0 19 25 12 *' || github.event.schedule == '0 7 26 12 *' || github.event.schedule == '0 16 26 12 *' || github.event.schedule == '30 18 29 12 *' || github.event.schedule == '30 6 30 12 *' || github.event.schedule == '30 15 30 12 *' || github.event.schedule == '30 11 2 1 *' || github.event.schedule == '30 23 2 1 *' || github.event.schedule == '30 8 3 1 *' || github.event.schedule == '0 19 5 1 *' || github.event.schedule == '0 7 6 1 *' || github.event.schedule == '0 16 6 1 *' || github.event.schedule == '30 11 16 1 *' || github.event.schedule == '30 23 16 1 *' || github.event.schedule == '30 8 17 1 *' || github.event.schedule == '30 11 23 1 *' || github.event.schedule == '30 23 23 1 *' || github.event.schedule == '30 8 24 1 *' || github.event.schedule == '0 14 30 1 *' || github.event.schedule == '0 2 31 1 *' || github.event.schedule == '0 11 31 1 *' || github.event.schedule == '0 23 5 2 *' || github.event.schedule == '0 11 6 2 *' || github.event.schedule == '0 20 6 2 *' || github.event.schedule == '0 23 9 2 *' || github.event.schedule == '0 11 10 2 *' || github.event.schedule == '0 20 10 2 *' || github.event.schedule == '0 23 19 2 *' || github.event.schedule == '0 11 20 2 *' || github.event.schedule == '0 20 20 2 *' || github.event.schedule == '0 23 26 2 *' || github.event.schedule == '0 11 27 2 *' || github.event.schedule == '0 20 27 2 *' || github.event.schedule == '0 23 2 3 *' || github.event.schedule == '0 11 3 3 *' || github.event.schedule == '0 20 3 3 *' || github.event.schedule == '0 23 12 3 *' || github.event.schedule == '0 11 13 3 *' || github.event.schedule == '0 20 13 3 *' || github.event.schedule == '0 23 19 3 *' || github.event.schedule == '0 11 20 3 *' || github.event.schedule == '0 20 20 3 *' || github.event.schedule == '0 23 9 4 *' || github.event.schedule == '0 11 10 4 *' || github.event.schedule == '0 20 10 4 *' || github.event.schedule == '0 23 16 4 *' || github.event.schedule == '0 11 17 4 *' || github.event.schedule == '0 20 17 4 *' || github.event.schedule == '0 23 23 4 *' || github.event.schedule == '0 11 24 4 *' || github.event.schedule == '0 20 24 4 *' || github.event.schedule == '0 23 30 4 *' || github.event.schedule == '0 11 1 5 *' || github.event.schedule == '0 20 1 5 *' || github.event.schedule == '0 23 7 5 *' || github.event.schedule == '0 11 8 5 *' || github.event.schedule == '0 20 8 5 *' || github.event.schedule == '0 23 15 5 *' || github.event.schedule == '0 11 16 5 *' || github.event.schedule == '0 20 16 5 *' || github.event.schedule == '0 23 22 5 *' || github.event.schedule == '0 11 23 5 *' || github.event.schedule == '0 20 23 5 *'
    steps:
      - name: Call Reminder API
        run: |
          curl --fail -X POST https://api.eplpredict.com/api/v1/admin/schedule/reminders \
            -H "X-API-Key: ${{ secrets.EXTERNAL_SYNC_API_KEY }}" \
            -H "Content-Type: application/json"

  auto-pick:
    name: Run Auto-Pick Assignment
    runs-on: ubuntu-latest
    if: github.event.schedule == '30 11 20 12 *' || github.event.schedule == '0 19 26 12 *' || github.event.schedule == '30 18 30 12 *' || github.event.schedule == '30 11 3 1 *' || github.event.schedule == '0 19 6 1 *' || github.event.schedule == '30 11 17 1 *' || github.event.schedule == '30 11 24 1 *' || github.event.schedule == '0 14 31 1 *' || github.event.schedule == '0 23 6 2 *' || github.event.schedule == '0 23 10 2 *' || github.event.schedule == '0 23 20 2 *' || github.event.schedule == '0 23 27 2 *' || github.event.schedule == '0 23 3 3 *' || github.event.schedule == '0 23 13 3 *' || github.event.schedule == '0 23 20 3 *' || github.event.schedule == '0 23 10 4 *' || github.event.schedule == '0 23 17 4 *' || github.event.schedule == '0 23 24 4 *' || github.event.schedule == '0 23 1 5 *' || github.event.schedule == '0 23 8 5 *' || github.event.schedule == '0 23 16 5 *' || github.event.schedule == '0 23 23 5 *'
    steps:
      - name: Call Auto-Pick API
        run: |
          curl --fail -X POST https://api.eplpredict.com/api/v1/admin/schedule/auto-pick \
            -H "X-API-Key: ${{ secrets.EXTERNAL_SYNC_API_KEY }}" \
            -H "Content-Type: application/json"

  sync-scores:
    name: Sync Live Scores
    runs-on: ubuntu-latest
    if: github.event.schedule == '*/2 20-22 15 12 *' || github.event.schedule == '*/2 12-14 20 12 *' || github.event.schedule == '*/2 15-17 20 12 *' || github.event.schedule == '*/2 17-19 20 12 *' || github.event.schedule == '*/2 20-22 20 12 *' || github.event.schedule == '*/2 16-18 21 12 *'
    steps:
      - name: Call Results Sync API
        run: |
          curl --fail -X POST https://api.eplpredict.com/api/v1/admin/sync/results \
            -H "X-API-Key: ${{ secrets.EXTERNAL_SYNC_API_KEY }}" \
            -H "Content-Type: application/json"
